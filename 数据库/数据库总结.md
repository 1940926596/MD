# 数据库
## 1 数据库基础知识
### 1.1数据库基本知识

```text
1. Data：数据，是数据库中存储的基本对象，是描述事物的符号记录。
2. Database：数据库，是长期储存在计算机内、有组织的、可共享的大量数据的集合。
3. DBMS：数据库管理系统，是位于用户与操作系统之间的一层数据管理软件，用于科学地组织、存储和管理数据、高效地获取和维护数据。
4. DBS：数据库系统，指在计算机系统中引入数据库后的系统，一般由数据库、数据库管理系统、应用系统、数据库管理员（DBA）构成。
```

**数据库管理系统**（MySql之类的数据库管理系统）

1.数据定义功能

DBMS提供数据定义语言（Data Definition Language,DDL），用户通过DDL方便的对数据对象进行定义。

2.数据组织、存储和管理

DBMS能分类组织、存储和管理各种数据，包括数据字典、用户、数据、数据存储路径。

3.数据操纵功能

DBMS提供数据操纵语言（Data Manipulation Language,DML）,实现对数据库的增删改查。

4.数据库的事务管理和运行管理

数据库在建立、运行和维护时由数据库管理系统统一管理、统一控制，以保证数据的安全性、完整性、多用户对数据的并发使用及发生故障后的系统恢复。

5.数据库的建立和维护功能

### **1.2 数据模型**

**数据模型（Data Model）**也是一种模型，它是对现实世界数据特征的抽象。

#### **1.2.1 两类数据模型**

**数据模型的要求**：能比较真实地模拟现实世界、容易为人理解、便于在计算机上实现。

**第一类：概念模型（Conceptual Model）**信息模型，按照用户观点对数据和信息建模，主要用于数据库设计。

**第二类：逻辑模型和物理模型**

​	**逻辑模型**：**包括层次模型、网状模型、关系模型（二维表）**、面对对象模型和对象关系模型等。是按计算机观点对数据建模，主要用于DBMS的实现。

​	**物理模型**：对数据的最底层抽象，描述数据在系统内的表示方法和存取方法，在磁盘或磁带上的存储和存取的方法，是面向计算机系统的。

#### **1.2.2 数据模型的组成要素**

数据模型通常由数据结构、数据操作和完整性约束三部分组成。

**一、数据结构**

​	描述数据库的组成对象以及对象之间的联系。是对系统静态特性的描述。

**二、数据操作**

​	增删改查。（查询和更新两大类），数据操作是对系统动态特征的描述。

**三、数据的完整性约束条件**

​	数据的完整性约束是一组完整性规则。

​	比如实体完整性（主键，唯一标识）、参照完整性（外键约束）

#### **1.2.3 概念模型**

概念模型是现实世界到机器世界的一个中间层次，表现为：

①概念模型用于信息世界的建模；

②现实世界到信息世界的第一层抽象；

③数据库设计人员进行数据库设计的有力工具；

④数据库设计人员和用户之间进行交流的语言。

概念模型要求：

①具有较强的语义表达能力：

②能够方便、直接地表达应用中的各种语义知识；

③简单、清晰、易于用户理解。

**一、信息世界中的基本概念**

**1.实体（Entity）**客观存在并可相互区别的事物称为实体。实体可以是具体人、事、物，也可以是抽象的概念或联系。

**2.属性（Attribute）**实体所具有的某一特性称为属性。一个实体可以由若干个属性来刻画。

**3.码（关键字）（Key）**唯一标识实体的属性集称为码。

**4.域（Domain）**域是一组具有相同数据类型的值的集合。属性的取值范围来自某个域。

**5.实体型（Entity Type）**具有相同属性的实体必然具有共同的特征和性质。【例】学生是一个实体型。

**6.实体集（Entity Set）**同一类型实体的集合称为实体集。【例】全体学生就是一个实体集。

**7.联系（Relationship）**在现实世界中，事物内部以及事物之间是有联系的，这些联系在信息世界中反映为实体（型）内部的联系和实体（型）之间的联系。

**二、两个实体型之间的联系**

**1.一对一联系（1：1）**

​	如果对于实体集A中的每一个实体，实体集B中至多有一个（也可以没有）实体与之联系，反之亦然，则称实体集A与实体集B具有一对一联系，记为1：1。

**2.一对多联系（1：n）**

​	如果对于实体集A中的每一个实体，实体集B中有n个实体(n≥0)与之联系，反之，对于实体集B中的每一个实体中至多只有一个实体与之联系，则称实体集A与实体集B具有一对多联系，记为1：n。

**3.多对多联系(m:n)**

​	如果对于实体集A中的每一个实体，实体集B中有n个实体(n≥0)与之联系，反之，对于实体集B中的每一个实体，实体集A中也有m个实体(m≥0)与之联系，则称实体集A与实体集B具有多对多联系，记为m:n。

**三、两个以上的实体型之间的联系**

​	两个以上的实体型之间也存在着一对一、一对多、多对多联系。

​	若实体型E_1,E_2,…,E_n之间存在联系，对于实体型**E_j(j不等于i)**中的给定实体，最多只和E_i中的一个实体相联系，则说E_i与E_1,E_2,…,E\_{i-1}，E\_{i+1},…,E_n关系是一对多的。

**四、单个实体型内的联系**

​	同一个实体集内的各实体之间也可以存在一对一、一对多、多对多的联系。

**五、概念模型的一种表示方法：实体-联系图(E-R图）**

E-R图提供了表示实体型、属性和联系的方法。

实体型：用矩形表示，矩形框内写明实体名。

属性：用椭圆形表示，并用无向边将其与相应的实体型连接起来。

联系：用菱形表示，菱形框内写明联系名，并用无向边分别与有关实体型连接起来，同时在无向边旁标上联系的类型（1：1，1：n或m：n）

【注意】如果一个联系具有属性，则这些属性也要用无向边与该联系连接起来。

#### **1.2.4 最常用的数据模型**

目前，数据库领域中最常用的逻辑数据模型有：层次模型(Hierarchical Model)、网状模型(Network Model)、关系模型(Relational Model)、面向对象模型(Object Oriented Model)、对象关系模型(Object Relational Model).

#### **1.2.5 关系模型**

**一、关系数据模型的数据结构**

**关系（Relation）**一个关系对应通常说的一张表。

**元组（Tuple）**表中的一行即为一个元组。

**属性（Attribute）**表中的一列即为一个属性。

**码（key）**表中唯一确定一个元组的某个属性组。

**域（Domain）**属性的取值范围。

**分量**元组的中的一个属性值。

**关系模式**对关系的描述，一般表示为：关系名（属性1，属性2，...，属性n）

**联系**也要用一张表表示

**二、关系数据模型的操纵与完整性约束**

​	关系数据模型的操作主要包括查询，插入、删除和更新数据这些操作必须满足关系的完整性约束条件。

​	关系的完整性约束条件包括三大类：

​	①实体完整性；

​	②参照完整性；

​	③用户定义的完整性。

 实体完整性：用于标识实体的唯一性。它要求基本关系必须要有一个能够标识元组唯一性的主键，主键不能为空，也不可取重复值。

 参照完整性： 用于维护实体之间的引用关系。 它要求一个关系的外键要么为空， 要么取与被参照关系对应的主键值，即外键值必须是主键中已存在的值。

 用户定义的完整性：就是针对某一具体应用的数据必须满足的语义约束。包括非空、 唯一和布尔条件约束三种情况。

#### 候选码、主码、全码、外码

在数据库设计中，常常会涉及到候选码、主码、全码和外码等概念：

1. **候选码 (Candidate Key)**：
   - 候选码是能够唯一标识关系中每一条记录的属性集合。
   - 一个关系可能有多个候选码。
   - 候选码的属性集合应该是最小的，即移除任何一个属性都不能唯一标识记录。
   - 在候选码集合中选取一个作为主码。

2. **主码 (Primary Key)**：
   - 主码是在候选码集合中选取的一个候选码，作为主要的标识符。
   - 主码的选择依赖于数据库设计者的需求和约束。
   - 主码必须是唯一且非空的，用来区分每一条记录。
   - 在关系数据库中，每个表只能有一个主码。

3. **全码 (Super Key)**：
   - 全码是能够唯一标识关系中每一条记录的任意属性集合，可能包含候选码和其他属性。
   - 一个候选码也是一个全码，因为候选码能够唯一标识每一条记录。
   - 超键（Super Key）是全码的更一般的概念，它可能包含候选码和其他属性。

4. **外码 (Foreign Key)**：
   - 外码是一个表中的字段，它包含了另一个表的主码，用来建立表之间的关系。
   - 外码用于确保引用完整性，即确保引用的数据在被引用的表中存在。
   - 外码用于建立表之间的关联，创建父子关系或者连接关系。

总之，候选码是能够唯一标识记录的属性集合，主码是在候选码中选择的一个作为主要标识符，全码是能够唯一标识记录的任意属性集合，而外码则是用来建立表之间关联的机制。

**三、关注关系数据模型的优点**

1.关系模型与格式化模型不同，它是建立在严格的数学概念的基础上的。

2.关系模型的概念单一。

3.关系模型的存取路径对用户透明（隐蔽）从而具有更高的数据独立性、更好的安全保密性也简化了程序员的工作和数据库开发建立的工作。

### **1.3 数据库系统结构**

#### **1.3.1数据库系统模式的概念**

模式(Schema)是数据库中全体数据的逻辑结构和特征的描述，同一个模式可以有很多实例。

#### **1.3.2 数据库系统的三级模式结构**

数据库系统的三级模式结构是指数据库系统是由外模式、模式和内模式三级构成。

**一、模式(Schema)**

模式也称逻辑模式，是数据库中全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图。

它是数据库系统模式结构的中间层，既不涉及数据的物理存储细节和硬件环境，也与具体的应用程序、所使用的应用开发工具及高级程序设计语言无关。

 **二、外模式(External Schema）**

外模式也称子模式(Subschema)或用户模式，它是数据库用户（包括应用程序员和最终用户）能够看见和使用的局部数据辑结构和特征的描述，是数据库用户的数据视图，是与某一应用有关的数据的逻辑表示。

【注意】

1.外模式通常是模式的子集，一个数据库可以有多个外模式。

2.同一外模式也可以为某一用户的多个应用系统所使用，但一个应用程序只能使用一个外模式。

3.外模式是保证数据库安全性的一个有力措施。每个用户只能看见和访问所对应的外模式中的数据，数据库中的其余数据是不可见的。

**三、内模式(Internal Schema)**

内模式也称存储模式(Storage Schema)，一个数据库只有一个内模式。它是数据物理结构和存储方式的描述，是数据在数据库内部的表示方式。

#### **1.3.3 数据库的二级映像功能与数据独立性**

​	数据库系统的三级模式是对数据的3个抽象级别，它把数据的具体组织留给DBMS管理，使用户能逻辑地抽象地处理数据，而不必关心数据在计算机中的具体表示方式与存储方式。

​	数据库管理系统在这三级模式之间提供了两层映像：

​	外模式/模式映像

​	模式/内模式映像

​	两层映像保证了数据库系统中的数据能够具有较高的逻辑独立性和物理独立性。

### **1.4数据库系统的组成**

数据库系统一般由数据库、数据库管理系统（及其开发工具）应用系统和数据库管理员构成。

## 2 关系型数据库
### 2.1关系数据库

#### 2.1.1关系数据库

1970年IBM公司的E.F.Codd提出关系数据模型

1972年提出了关系的第一、第二、第三范式

1974年提出了关系的BC范式

80年代后，关系数据库系统成为最重要、最流行的数据库

**1.域（Domain）**

域是一组具有相同数据类型的值的集合

**2.笛卡儿积（Cartesian Product）**

给定一组域D_1,D_2,...,D_n,这些域可以是相同的。

D_1,D_2,...,D_n的笛卡尔积为：D_1D_2...D_n= {(d_1,d_2,...,d_n)|d_i in D_i,i=1,2,...,n }。

**元组**

笛卡尔积中的每一个元素(d_1,d_2,...,d_n)称作一个n元组（n-tuple）或简称元组（Tuple）。

**分量（Component）**

笛卡尔积元素(d_1,d_2,...,d_n)中的每一个值d_i称作一个分量。

**基数（Cardinal number）**

若D_i(i=1,2,...,n)为一个有限集，其基数为m_i(i=1,2,...,n),则D_1D_2...\*D_n的基数M为：M=Π（m_i） 

**3.关系（Relation）**

**（1）关系**

D_1\*D_2...\*D_n的子集称做在域D_1,D_2,...,D_n上的关系，表示为R(D_1,D_2,...,D_n)。

R表示关系名，n表示关系的目或度（Degree）。

**（2）元组**

关系中每个元素是关系中的元组，通常用t表示。

**（3）单元关系与二元关系**

当n=1时，称该关系为单元关系。

当n=2时，称该关系为二元关系。

**（4）关系的表示**

关系也是一个二维表，表的每行对应一个元组，表的每列对应一个域，一个属性。

**（5）属性**

关系中不同列可以对应相同的域，为了加以区分，必须对每一列起一个名字，称为属性(Attribute)

**（6）码**

候选码(Candidate key)：若关系中的某一属性组的值能唯一地标识一个元组，则称该属性组为候选码。

简单的情况：候选码只包含一个属性。

全码(All-key)：最极端的情况：关系模式的所有属性组成这个关系模式的候选码，称为全码(All-key)。

主码：若一个关系有多个候选码，则选定其中一个为主码（Primary key).

主属性：候选码的诸属性称为主属性(Primary attribute)

非主属性：不包含在任何侯选码中的属性（no-Primary attribute),或非码属性(Non-key attribute)

**(7)三类关系**

①基本关系（基本表或基表）：实际存在的表，是实际存储数据的逻辑表示。

②查询表：查询结果对应的表。

③视图表：由基本表或其他视图表导出的表，是虚表，不对应实际存储的数据。

**(8)基本关系的性质**

①列是同质的(Homogeneous)

②不同的列可出自同一个域，其中的每一列称为一个属性，不同的属性要给予不同的属性名；

③列的顺序无所谓，列的次序可以任意交换;

④任意两个元组的候选码不能相同；

⑤行的顺序无所谓，行的次序可以任意交换；

⑥分量必须取原子值，这是规范条件中最基本的一条。

#### **2.1.2 关系模式**

**1.什么是关系模式**

关系模式（Relation Schema）是对关系的描述。关系模式是型，关系是值。

**（1）元组集合的结构**

属性构成、属性来自的域、属性与域之间的映像关系。

**（2）一个关系通常由赋予它的元组语义确定。**

**（3）现实的世界中还存在完整性约束。**

**2.定义关系模式**

关系模式可以形式化地表示为：R(U,D,DOM,F)

- R: 关系名（Relation Name）
- U: 组成该关系的属性名集合（Attribute Set）
- D: 属性组 U 中属性所来自的域（Domain）
- DOM: 属性向域的映射集合（Domain Mapping）
- F: 属性间的数据依赖关系集合（Functional Dependencies）

**3.关系模式与关系**

关系模式是静态的、稳定的。

关系是动态的、随时间不断变化的。

关系是关系模式在某一时刻的状态或内容，在实际工作中关系模式和关系往往统称为关系，需要通过上下文加以区别。

#### **2.1.3 关系**

**1.关系数据库**

在一个给定的应用领域中，所有关系的集合构成一个关系数据库。

**2.关系数据库的型与值**

(1)关系数据库的型：关系数据库模式，对关系数据库的描述。

(2)关系数据库模式：若干域的定义，在这些域上定义的若干关系模式。

(3)关系数据库的值：关系模式在某一时刻对应的关系的集合，简称为关系数据库。

#### **2.1.4 关系模型的存储结构**

1.有的关系数据库管理系统中一个表对应一个操作系统文件将物理数据组织交给操作系统完成。

2.有的关系数据库管理系统从操作系统那里申请若干文件，自己划分文件空间，组织表、索引等存储结构，并进行管理。

### **2.2 关系数据结构**

#### **2.2.1 基本关系操作**

**一、常用的关系操作**

查询：选择、投影、连接、除、并、交、差等，其中选择、投影、并、差、笛卡尔积是五种基本操作。

数据更新：插入、删除、修改。

查询的表达能力是其中最主要的部分。

**二、关系操作的特点**

集合操作方式：操作的对象和结果都是集合。

#### **2.2.2 关系数据库语言的分类**

**一、关系代数语言**

用对关系的运算来表达查询的要求。代表：ISBL。

**二、关系演算语言（不要求）**

用谓词来表达查询要求。

1. 元组关系演算语言：谓词变元的基本对象是元组变量。代表APLHA、QUEL
2. 域关系演算语言：谓词变元的基本对象是域变量。代表：QBE

**三、具有关系代数和关系演算双重特点的语言**

代表：SQL(Structured Query Language)

### **2.3 关系的完整性**

实体完整性和参照完整性是关系数据库中非常重要的完整性约束，而用户定义的完整性约束则是根据具体业务需求而定制的约束条件。

#### 实体完整性（Entity Integrity）

实体完整性确保关系中的每个实体都有一个唯一标识，并且这个标识不为空。在关系模型中，通常使用主键来实现实体完整性。主键是能够唯一标识关系中每个元组的属性或属性组合。

例如，如果一个关系是学生信息表，那么学生的学号可以作为主键，确保每个学生都有一个唯一的学号，并且学号不为空。

#### 参照完整性（Referential Integrity）

参照完整性保证关系之间的引用的一致性。它通常涉及到外键与主键之间的关系。外键是一个关系中的属性，它引用了另一个关系的主键。参照完整性要求每个外键值必须是被引用关系中的一个有效的主键值，或者是空值。

举例来说，如果一个订单表中有一个字段是客户ID，它引用了客户表中的客户ID，那么参照完整性要求订单表中的每个客户ID必须在客户表中存在，或者可以为空值。

#### 用户定义的完整性

用户定义的完整性是针对特定业务需求而定制的完整性约束。这些约束可以是业务规则、逻辑条件或其他业务逻辑上的要求。例如，一个银行数据库可能有规定，用户的账户余额不能为负数，或者一个在线商店的数据库可能规定商品的库存不能为负数。

用户定义的完整性约束需要在数据库设计阶段考虑和定义，并通过数据库管理系统来实现和维护。

总的来说，实体完整性和参照完整性是关系数据库管理系统必须满足的基本完整性约束，而用户定义的完整性约束则是根据具体业务需求来定义的，可以更灵活地满足特定业务场景下的要求。

## 3 关系数据库的操作

关系数据库中的关系操作是用于对关系型数据库中的数据进行增加、删除、修改和查询的操作。关系操作主要包括以下几种：

1. **插入（INSERT）：** 插入操作用于向数据库表中插入新的数据行。语法通常为：
   ```sql
   INSERT INTO table_name (column1, column2, ...)
   VALUES (value1, value2, ...);
   ```

2. **查询（SELECT）：** 查询操作用于从数据库表中检索数据行。可以使用不同的条件和筛选条件来获取所需的数据。语法通常为：
   ```sql
   SELECT column1, column2, ...
   FROM table_name
   WHERE condition;
   ```

3. **更新（UPDATE）：** 更新操作用于更新数据库表中现有数据行的值。语法通常为：
   ```sql
   UPDATE table_name
   SET column1 = value1, column2 = value2, ...
   WHERE condition;
   ```

4. **删除（DELETE）：** 删除操作用于从数据库表中删除数据行。语法通常为：
   ```sql
   DELETE FROM table_name
   WHERE condition;
   ```

5. **连接（JOIN）：** 连接操作用于从多个表中检索相关联的数据。连接操作允许根据表之间的关联条件（通常是外键）来合并数据。常见的连接类型包括内连接、外连接和自然连接。

6. **排序（ORDER BY）：** 排序操作用于按照指定的列对检索到的数据进行排序。语法通常为：
   
   ```sql
   SELECT column1, column2, ...
   FROM table_name
   ORDER BY column1 ASC/DESC, column2 ASC/DESC, ...;
   ```
   
7. **分组（GROUP BY）与聚合（Aggregate Functions）：** 分组操作用于将数据行按照指定的列进行分组，聚合函数用于对每个分组中的数据进行统计和汇总。常见的聚合函数包括 COUNT、SUM、AVG、MAX、MIN 等。

8. **子查询（Subquery）：** 子查询操作允许在 SQL 语句中嵌套其他 SQL 查询，以便更复杂的查询需求。

这些关系操作是关系型数据库系统中用于管理数据的基本操作，通过合理地使用这些操作，可以对数据库中的数据进行灵活的管理和处理。

#### 连接

在关系型数据库中，内连接（Inner Join）、外连接（Outer Join）和自然连接（Natural Join）是用于将多个表中的数据联合起来的操作，以便执行复杂的查询。

1. **内连接（Inner Join）：** 内连接是最常见的连接操作之一。它通过匹配两个表之间的共同字段（通常是主键和外键），返回两个表中符合连接条件的数据行的交集。内连接只返回满足连接条件的数据行。语法通常如下：
   
   ```sql
   SELECT columns
   FROM table1
   INNER JOIN table2
   ON table1.column_name = table2.column_name;
   ```
   
2. **外连接（Outer Join）：** 外连接允许返回两个表中的所有数据行，同时匹配满足连接条件的数据行。如果在左表中找不到匹配的行，则对于左外连接（Left Outer Join），右表的数据列将用 NULL 值填充；反之，右外连接（Right Outer Join）类似。全外连接（Full Outer Join）则返回两个表的所有数据行，无论是否存在匹配。语法通常如下：
   - 左外连接：
     ```sql
     SELECT columns
     FROM table1
     LEFT OUTER JOIN table2
     ON table1.column_name = table2.column_name;
     ```
   - 右外连接：
     ```sql
     SELECT columns
     FROM table1
     RIGHT OUTER JOIN table2
     ON table1.column_name = table2.column_name;
     ```
   - 全外连接：
     ```sql
     SELECT columns
     FROM table1
     FULL OUTER JOIN table2
     ON table1.column_name = table2.column_name;
     ```

3. **自然连接（Natural Join）：** 自然连接是根据两个表之间具有相同名称的列进行连接的操作。它会自动查找两个表中具有相同列名的字段，并将这些字段用作连接条件。自然连接不需要指定连接条件。自然连接不是很常见，因为它依赖于列名的一致性，而这在实际情况中往往不可靠。语法如下：
   ```sql
   SELECT columns
   FROM table1
   NATURAL JOIN table2;
   ```

这些连接操作可以帮助数据库用户执行复杂的数据查询和分析，有效地使用它们可以实现数据之间的关联和联合。

## 4 五大范式

1. 第一范式（1NF）：确保每个列都是原子性的，也就是说，每个列中的值都是不可再分的。换句话说，每个单元格中只能包含一个值，而不是多个值或者集合。

2. 第二范式（2NF）：在满足第一范式的基础上，消除非关键属性对任何候选键的部分函数依赖。换句话说，如果一个表中有组合键（Composite Key），那么非关键字段必须完全依赖于组合键的所有部分，而不是依赖于组合键的一部分。

3. 第三范式（3NF）：在满足第二范式的基础上，消除非关键属性对任何候选键的传递函数依赖。

4. 巴斯-科德范式（BCNF）：在满足第三范式的基础上，消除主属性对候选键的部分和传递依赖。BCNF 是对第三范式的进一步强化，确保数据结构更加严格和规范。

5. 第四范式（4NF）：消除多值依赖，确保表中的每个多值依赖都能被单独地识别并存储。

这些范式旨在规范数据库设计，以避免数据冗余和不一致性，提高数据库的性能和可维护性。

#### 部分函数依赖

部分函数依赖是指在关系模式中，一个非主属性（Non-Prime Attribute）依赖于关系键的一部分，而不是完全依赖于整个关系键。换句话说，如果一个关系模式有复合关键（Composite Key），部分函数依赖发生在一个非关键属性依赖于关键的一部分而不是全部的情况。

举个例子来说，假设我们有一个包含学生信息的表格，其中包括学生ID和课程ID作为复合关键字，以及学生姓名和课程名称作为非关键属性。

如果学生姓名只依赖于学生ID，而不依赖于课程ID，那么就存在部分函数依赖。因为学生姓名应该与整个关键字（即学生ID和课程ID的组合）相关联，而不仅仅是与学生ID相关。

部分函数依赖违反了第二范式的规则，因为它意味着非关键属性不完全依赖于关系的全部关键字。为了消除部分函数依赖，我们需要将数据结构重新设计，以确保非关键属性完全依赖于关系的全部关键字。

#### 多值依赖

假设我们有一个关系模式，其中包含学生、课程和教师的信息。我们有以下属性：

- 学生姓名
- 课程名称
- 教师姓名

现在，假设一位学生可以选择多门课程，每门课程可能由不同的教师教授。在这种情况下，我们可能会遇到多值依赖。

如果我们以学生姓名和课程名称作为键，教师姓名作为依赖项，那么存在多值依赖。这是因为对于相同的学生和课程，可能会有不同的教师教授。

举个例子：

- 学生A选修数学课（课程1），教师是张老师。
- 学生A再次选修数学课（课程1），但这次教师是李老师。

在这个例子中，学生姓名和课程名称确定了教师姓名的多个值（张老师和李老师）。这就是多值依赖。

要消除多值依赖，我们可以重新设计数据库模式，确保每个属性只依赖于键。在这个例子中，我们可以为每个课程分配一个唯一的课程ID，这样每个学生、每门课程和每位教师的组合将唯一确定一个记录，从而消除多值依赖。

## 5 数据库安全

数据库安全性是指对数据库系统中的数据、用户、操作和系统进行保护和管理，以防止未经授权的访问、数据泄露、篡改、破坏或其他安全威胁。数据库安全性涉及多个方面，包括以下几个关键方面：

1. **身份验证和授权：** 数据库应该实现有效的身份验证机制，确保只有经过身份验证的用户可以访问数据库。此外，数据库还应该实施细粒度的授权策略，根据用户的角色和权限，对其进行精确授权，以确保用户只能访问其所需的数据和操作。

2. **加密：** 数据库中的敏感数据应该进行加密存储，以防止未经授权的访问或泄露。加密技术可以用于保护数据在传输和存储过程中的安全性，确保即使数据库被盗，敏感数据也不会被直接泄露。

3. **访问控制：** 数据库应该实施严格的访问控制策略，包括基于角色的访问控制、访问审计和监控，以及限制对数据库服务器和管理工具的访问。这些控制措施可以防止恶意用户或攻击者未经授权地访问数据库或执行危险操作。

4. **审计和监控：** 数据库应该记录所有的数据库活动和操作，并且能够对这些日志进行审计和监控。审计功能可以帮助发现异常行为、安全事件和潜在的安全漏洞，及时采取措施进行应对和修复。

5. **数据备份和恢复：** 数据库应该定期进行备份，并确保备份数据的安全存储。在发生数据丢失、损坏或其他灾难性事件时，数据库管理员应该能够快速有效地恢复数据库到正常运行状态，以确保业务连续性和数据完整性。

6. **漏洞管理和补丁更新：** 数据库管理员应该定期监测和评估数据库系统的安全漏洞，并及时应用厂商发布的安全补丁和更新，以修复已知的安全漏洞和弱点，保障数据库系统的安全性。

综合考虑上述方面，建立一个综合的数据库安全策略和控制措施是保护数据库系统安全的关键。这需要数据库管理员和安全团队与业务部门密切合作，共同制定并执行适合组织需求的安全策略，并不断评估和改进数据库系统的安全性。

## 存在的一些问题

字段，属性
元组，记录

连接 笛卡尔积

若实体型E_1,E_2,…,E_n之间存在联系，对于实体型**E_j(j不等于i)**中的给定实体，最多只和E_i中的一个实体相联系，则说E_i与E_1,E_2,…,E\_{i-1}，E\_{i+1},…,E_n关系是一对多的。

视图和模式
